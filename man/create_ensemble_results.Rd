% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/benchmark_with_ensemble.R
\name{create_ensemble_results}
\alias{create_ensemble_results}
\title{Create ensemble results combining LRI-based and CytoSig methods}
\usage{
create_ensemble_results(
  master_tbl,
  ensemble_method = "mean_rank",
  pval_col_lri = "pval",
  pval_col_cytosig = "pval"
)
}
\arguments{
\item{master_tbl}{A tibble containing benchmark results from benchlist_to_tbl(),
with columns: study_type, cytokine, method, database, class, ligand_tables}

\item{ensemble_method}{Character string specifying ensemble method.
Currently supports "mean_rank" (default)}

\item{pval_col_lri}{Character string specifying the p-value column name
in LRI method results. Default is "pval"}

\item{pval_col_cytosig}{Character string specifying the p-value column name
in CytoSig method results. Default is "pval"}
}
\value{
A tibble with additional ensemble columns:
\itemize{
\item overlap_count: Number of overlapping ligands between LRI and CytoSig
\item ensemble_table: Combined LRI and CytoSig results with rankings
\item ensemble_rank: Mean rank score combining LRI and CytoSig rankings
\item lri_rank: Percentile rank from LRI method (100 = best, 0 = worst)
\item cytosig_rank: Percentile rank from CytoSig method (100 = best, 0 = worst)
}
}
\description{
This function combines results from LRI-based methods with CytoSig results
using a rank-based ensemble approach. It performs an inner join between
LRI and CytoSig results and computes ensemble rankings based on p-values.
}
\details{
The function:
\enumerate{
\item Filters for LRI-based methods (class == "LRI")
\item Joins with CytoSig results (class == "CytoSig_Web") by study_type and cytokine
\item Computes overlap between LRI and CytoSig ligand sets
\item Creates ensemble rankings using percentile ranks (lower p-value = higher rank)
\item Falls back to CytoSig-only results when no LRI data is available
}

Ranking system: Converts p-values to percentile ranks where 100 represents
the best (lowest p-value) and 0 represents the worst (highest p-value).
}
\examples{
\dontrun{
# Assuming you have benchmark results
results <- run_cytokinefinder_workflow(study_data, databases, methods)

# Convert to tibble format  
master_tbl <- benchlist_to_tbl(results$benchmarks, "my_study", FALSE)

# Create ensemble results
ensemble_results <- create_ensemble_results(
  master_tbl, 
  ensemble_method = "mean_rank",
  pval_col_lri = "pval",
  pval_col_cytosig = "pval"
)

# View ensemble rankings
ensemble_results \%>\% 
  select(cytokine, method, database, ensemble_rank, lri_rank, cytosig_rank)
}
}
